---
title: "Cloze Project Data Analysis"
output: html_notebook
---

Load our packages
```{r}
knitr::opts_chunk$set(echo = TRUE)
suppressPackageStartupMessages(library(Rmisc))
suppressPackageStartupMessages(library(data.table))
suppressPackageStartupMessages(library(stringr))
suppressPackageStartupMessages(library(dplyr))
suppressPackageStartupMessages(library(ggplot2))
suppressPackageStartupMessages(library(ez))
suppressPackageStartupMessages(library(lme4))
suppressPackageStartupMessages(library(gridExtra))
```

Load and summarize the data. We also want to switch the data types of 
ClausePlacement and Location to categorical since they are just binary factors

```{r}
data <- read.csv('../data/PreprocessedData.csv')
summary(data)
```

Setting up our contrasts (this is still no good)
```{r}
contrasts.Tri <- 
  matrix(c(1/4, 1/4, 1/4,
           -1, 1/2, 1/2, 
           0, -1, 1), ncol = 3) %>%
  t(.) %>%
  solve(.) %>%
  .[,2:3]
contrasts(data$ClausePlacement) <- contrasts.Tri
contrasts(data$Location) <- c(-.5,.5)
```

```{r}
model <- lmer(Preprocessed.value ~ 1 + Item * Condition +
                (Item * Condition || MD5.hash.of.participant.s.IP.address) +
                   ( || Item),, 
              data=data, 
              REML=F,
              control = lmerControl(calc.derivs=FALSE), 
              na.action = na.omit)
summary(model)
```
